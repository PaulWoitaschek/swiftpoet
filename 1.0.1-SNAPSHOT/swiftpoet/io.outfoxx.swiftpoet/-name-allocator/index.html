<HTML>
<HEAD>
<meta charset="UTF-8">
<title>NameAllocator - swiftpoet</title>
<link rel="stylesheet" href="../../../style.css">
</HEAD>
<BODY>
<a href="../../index.html">swiftpoet</a>&nbsp;/&nbsp;<a href="../index.html">io.outfoxx.swiftpoet</a>&nbsp;/&nbsp;<a href="./index.html">NameAllocator</a><br/>
<br/>
<h1>NameAllocator</h1>
<code><span class="keyword">class </span><span class="identifier">NameAllocator</span></code>
<p>Assigns Swift identifier names to avoid collisions, keywords, and invalid characters. To use,
first create an instance and allocate all of the names that you need. Typically this is a
mix of user-supplied names and constants:</p>
<pre><code>val nameAllocator = NameAllocator()
for (property in properties) {
  nameAllocator.newName(property.name, property)
}
nameAllocator.newName("sb", "string builder")
</code></pre>
<p>Pass a unique tag object to each allocation. The tag scopes the name, and can be used to look up
the allocated name later. Typically the tag is the object that is being named. In the above
example we use <code>property</code> for the user-supplied property names, and <code>"string builder"</code> for our
constant string builder.</p>
<p>Once we've allocated names we can use them when generating code:</p>
<pre><code>val builder = FunctionSpec.getterBuilder()
  .returns(DeclaredTypeName.STRING)

builder.addStatement(#"var %N = """#, nameAllocator.get("string builder"))

for (property in properties) {
  builder.addStatement(#"%N += "\(%N)"#, nameAllocator.get("string builder"), nameAllocator.get(property))
}
builder.addStatement("return %N", nameAllocator.get("string builder"))

return PropertySpec.builder("description", DeclaredTypeName.STRING)
  .getter(builder.build())
  .build()
</code></pre>
<p>The above code generates unique names if presented with conflicts. Given user-supplied properties
with names <code>ab</code> and <code>sb</code> this generates the following:</p>
<pre><code>var description: String {
  var sb_ = ""
  sb_ += "\(ab)"
  sb_ += "\(sb)"
  return sb_
}
</code></pre>
<p>The underscore is appended to <code>sb</code> to avoid conflicting with the user-supplied <code>sb</code> property.
Underscores are also prefixed for names that start with a digit, and used to replace name-unsafe
characters like space or dash.</p>
<p>When dealing with multiple independent inner scopes, use a <a href="copy.html">copy</a> of the
NameAllocator used for the outer scope to further refine name allocation for a specific inner
scope.</p>
<h3>Constructors</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="-init-.html">&lt;init&gt;</a></h4>
</td>
<td>
<code><span class="identifier">NameAllocator</span><span class="symbol">(</span><span class="symbol">)</span></code></td>
</tr>
</tbody>
</table>
<h3>Functions</h3>
<table>
<tbody>
<tr>
<td>
<h4><a href="copy.html">copy</a></h4>
</td>
<td>
<p>Create a deep copy of this NameAllocator. Useful to create multiple independent refinements
of a NameAllocator to be used in the respective definition of multiples, independently-scoped,
inner code blocks.</p>
<code><span class="keyword">fun </span><span class="identifier">copy</span><span class="symbol">(</span><span class="symbol">)</span><span class="symbol">: </span><a href="./index.html"><span class="identifier">NameAllocator</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="get.html">get</a></h4>
</td>
<td>
<p>Retrieve a name created with <a href="new-name.html">NameAllocator.newName</a>.</p>
<code><span class="keyword">operator</span> <span class="keyword">fun </span><span class="identifier">get</span><span class="symbol">(</span><span class="identifier" id="io.outfoxx.swiftpoet.NameAllocator$get(kotlin.Any)/tag">tag</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a><span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code></td>
</tr>
<tr>
<td>
<h4><a href="new-name.html">newName</a></h4>
</td>
<td>
<p>Return a new name using <code>suggestion</code> that will not be a Swift identifier or clash with other
names. The returned value can be queried multiple times by passing <code>tag</code> to
<a href="get.html">NameAllocator.get</a>.</p>
<code><span class="keyword">fun </span><span class="identifier">newName</span><span class="symbol">(</span><span class="identifier" id="io.outfoxx.swiftpoet.NameAllocator$newName(kotlin.String, kotlin.Any)/suggestion">suggestion</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a><span class="symbol">, </span><span class="identifier" id="io.outfoxx.swiftpoet.NameAllocator$newName(kotlin.String, kotlin.Any)/tag">tag</span><span class="symbol">:</span>&nbsp;<a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-any/index.html"><span class="identifier">Any</span></a>&nbsp;<span class="symbol">=</span>&nbsp;UUID.randomUUID().toString()<span class="symbol">)</span><span class="symbol">: </span><a href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-string/index.html"><span class="identifier">String</span></a></code></td>
</tr>
</tbody>
</table>
</BODY>
</HTML>
